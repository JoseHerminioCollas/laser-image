<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Laser Image</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="Goatstone">
  <script src="https://www.marvinj.org/releases/marvinj-1.0.js"></script>
  <style>
  body{
    font-size: 11px;
  }
  #display {
    font-size: 2px;
    font-weight: 900;
    font-family: 'Courier New', Courier, monospace;
  }
  </style>
</head>

<body>
  <div id="display">x</div>
  <canvas id="canvas-a" width="300px" height="350px"></canvas>
  <script>
    const picA = 'mona-lisa-leonardo-da-vinci-la-gioconda-oil-painting-40997.jpeg'
    const picB = 'test-image.png'
    const picC = "https://i.imgur.com/NOAqlBx.jpg"
    const picD = 'mona-small.png'

    var marvinImage = new MarvinImage();
    const el = document.getElementById('display')
    function cb() {
      const d = marvinImage.imageData.data
      let i = 0
      while (i < d.length) {
        const total = d[i] + d[i + 1] + d[i + 2]
        if (total < 300) {
          el.append('XX')
        }
        else {
          el.append('__')
        }
        if (i % (marvinImage.imageData.width * 4) === 0){
          const br = document.createElement('br')
          el.append(br)
        }
         i += 4
      }
    }
    marvinImage.load(picD, cb);
  </script>
</body>

</html>