<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Laser Image</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="Goatstone">
  <script src="https://www.marvinj.org/releases/marvinj-1.0.js"></script>
  <script src="svg.min.js"></script>
  <style>
    body {
      font-size: 11px;
    }

    #display {
      font-size: 2px;
      font-weight: 900;
      font-family: 'Courier New', Courier, monospace;
    }
  </style>
</head>

<body>
  <div id="drawing"></div>
  <div id="display">x</div>
  <canvas id="canvas-a" width="300px" height="350px"></canvas>
  <script>
    const picA = 'mona-lisa-leonardo-da-vinci-la-gioconda-oil-painting-40997.jpeg'
    const picB = 'test-image.png'
    const picC = "https://i.imgur.com/NOAqlBx.jpg"
    const picD = 'mona-small.png'

    var marvinImage = new MarvinImage();
    var draw = SVG('drawing')
      .size(500, 900)
    const el = document.getElementById('display')
    let col = 0
    let row = 0
    const colShift = 6
    const rowShift = 6
    const radius = 3
    function cb() {
      const d = marvinImage.imageData.data
      let i = 0
      while (i < d.length) {
        const total = d[i] + d[i + 1] + d[i + 2]        
        row += rowShift
        if (d[i] < 100) {
          draw.circle(radius)
            .attr({ fill: 'red' })
            .move(row, col - 2 )
        }
        if (d[i + 1] < 100) {
          draw.circle(radius)
            .attr({ fill: 'green' })
            .move(row, col )
        }
        if (d[i + 2] < 50) {
          draw.circle(radius)
            .attr({ fill: 'blue' })
            .move(row, col + 2)
        }
        // end of line
        if (i % (marvinImage.imageData.width * 4) === 0) {
          // const br = document.createElement('br')
          col += colShift
          row = 0
        }
        i += 4
      }
    }
    marvinImage.load(picD, cb);
    // SVG.on(document, 'DOMContentLoaded', function () {
    //   console.log('abc', SVG)
    //   var draw = SVG('drawing')
    //   draw.size(300, 300)
    //   var rect = draw.rect(100, 100).attr({ fill: 'blue' })
    // })
  </script>
</body>

</html>